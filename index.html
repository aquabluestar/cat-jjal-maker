<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ê³ ì–‘ì´ ê°€ë¼ì‚¬ëŒ€</title>
  </head>
  <style>
    body {
      text-align: center;
    }
    .main-card button {
      position: relative;
      left: -45px;
      bottom: 15px;
    }
    .favorites {
      list-style: none;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 15px;
    }
    /* .favorites img {
      width: 150px;
    } */
  </style>
  <body>

    <div id="app"></div>
    
    

    <!-- ë¦¬ì•¡íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‹¤í–‰ ë§í¬-->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <!--  ë°”ë²¨ ìŠ¤í¬ë¦½íŠ¸ ë§í¬ : htmlì˜ <> êº½ì‡  ë¬¸ë²•ì„ ì“¸ ìˆ˜ ìˆê²Œ í•˜ëŠ”-->
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <script type="text/babel">

      const jsonLocalStorage = {
        setItem: (key, value) => {
          localStorage.setItem(key, JSON.stringify(value));
        },
        getItem: (key) => {
          return JSON.parse(localStorage.getItem(key));
        },
      };

      // const catItem =(
      //   <li>
      //     <img src="https://cataas.com/cat/HSENVDU4ZMqy7KQ0/says/react"/>
      //   </li>
      // )

      // 3. ìœ„ì˜ ë³€ìˆ˜ë¥¼ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ í˜•ìœ¼ë¡œ ë§Œë“¤ì–´ì¤Œ, ê·¸ë¦¬ê³  props(ì¸ì)ì„ ë°›ëŠ” ì»´í¼ë„ŒíŠ¸í˜•ìœ¼ë¡œë„ ë§Œë“¬
      function CatItem(props){
        return(
          <li>
            {props.title}
            <img src={props.img} style={{width: '150px'}}/>
          </li>
        );
      } 
      
      // ì»´í¼ë„ŒíŠ¸í˜•ìœ¼ë¡œ ë§Œë“¬
      const H1 = (props) => {
        return(
          <h1>{props.children}</h1>
        );
      }

      // ì»´í¼ë„ŒíŠ¸í˜•ìœ¼ë¡œ ë§Œë“¬
      const Form = ({updateMainCat}) =>{// ìƒíƒœì™€ handelFormSumit í•¨ìˆ˜ë¥¼ ë¶€ëª¨ìª½ìœ¼ë¡œ ì˜®ê²¨ì„œ props ê°ì²´ë¬¸ë²•ì„ ê°€ì ¸ì˜´
        // í•œê¸€ ê²€ì‚¬ í•¨ìˆ˜ ë§Œë“¤ê¸°
        const includesHangul = (text) => /[ã„±-ã…|ã…-ã…£|ê°€-í£]/i.test(text);
        // input ìƒíƒœ ë§Œë“¤ê¸°
        const [value, setValue] = React.useState('')
        // ì—ëŸ¬ ë©”ì„¸ì§€ ìƒíƒœ ì¶”ê°€
        const [errorMessage, setErrorMessage] = React.useState('')
        function handleInputChange(e){
          const userValue = e.target.value;
          console.log(includesHangul(userValue));// includesHangulì— userValueê°€ í¬í•¨ì´ ë˜ëŠëƒ?
          setErrorMessage('') // ë°‘ì— else ë¬¸ ì“¸ í•„ìš”ì—†ì´ ì´ˆê¸°í™” í•´ì£¼ê³  ì‹œì‘í•˜ë©´ ë¨
          if(includesHangul(userValue)) { //ë§Œì¼ í•œê¸€ì´ ìˆë‹¤ë©´ ~
            setErrorMessage('í•œê¸€ì€ ì…ë ¥í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤')
          }
          setValue(userValue.toUpperCase());// ì´ë²¤íŠ¸(inputì˜ onChange) ì´ê²ƒì˜ ê°’ì„ ëŒ€ë¬¸ìë¡œì˜ ìƒíƒœì¡°ì‘
        }

        function handelFormSumit(e){
          e.preventDefault()
          setErrorMessage('')
          if(value === ''){
            setErrorMessage('ë¹ˆê°’ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')
            return;
          }
          updateMainCat()
        }
        // í¼ ì œì¶œ ì´ë²¤íŠ¸
        return (
          <form onSubmit={handelFormSumit}>
            <input type="text" name="name" placeholder="ì˜ì–´ ëŒ€ì‚¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”" onChange={handleInputChange} value={value}/>
            <button type="submit">ìƒì„±</button>
            <p style={{color: 'red'}}>{errorMessage}</p>
          </form>
        );
      };
      
      // ê°™ì€ htmlìš”ì†Œê°€ ìˆë‹¤ë©´ {}ì•ˆì— ë³€ìˆ˜ëª…ì„ ì¨ì£¼ë©´ë¨, ì—°ì‚°ë„ë¨ ,ë³€ìˆ˜ë¥¼  ë„£ìŒ, ì‚¼í•­ì—°ì‚°ì, í•¨ìˆ˜ë„ ê°€ëŠ¥
      // ìœ„ì˜ ì¤‘ê´„í˜¸ì— ë³€ìˆ˜ë¡œ ë“¤ì–´ ê°”ë˜ ë¶€ë¶„ì„ ë¦¬ì•¡íŠ¸í˜• ì»´í¬ë„ŒíŠ¸ë¡œ ë§Œë“¤ì–´ ë†“ì€ê²ƒ(CatItem)ì„ HTML íƒœê·¸í˜•ìœ¼ë¡œ ì”€
      // const favorites = (
      //   <ul className="favorites">
      //     <CatItem img='https://cataas.com/cat/BxqL2EjFmtxDkAm2/says/inflearn' title='cat1'/>
      //     <CatItem img='https://cataas.com/cat/18MD6byVC1yKGpXp/says/JavaScript'/>
      //   </ul> 
      // )

      //ìœ„ì˜ ë³€ìˆ˜í˜•ì„ ì»´í¬ë„ŒíŠ¸í˜•ìœ¼ë¡œ ë§Œë“¬
      function Favorites({favorites}){// ìƒíƒœë„ ë°°ì—´ë¡œ ë˜ì–´ ìˆê¸°ë•Œë¬¸ì— propsìœ¼ë¡œ ë°›ì•„ë„ ë¨

        // ì•„ë˜ì˜ CatItemë“¤ì„ {}ì— JSXë¬¸ë²•ì„ ì¨ì„œ .map()ë©”ì„œë“œë¡œ ë§Œë“¤ì–´ì¤Œ
        // <CatItem img='https://cataas.com/cat/BxqL2EjFmtxDkAm2/says/inflearn' title='cat1'/>
        // <CatItem img='https://cataas.com/cat/18MD6byVC1yKGpXp/says/JavaScript'/>
        
        return (
          <ul className="favorites">
            {favorites.map((cat) =>(
              <CatItem img={cat} key={cat} />
            ))}
          </ul>
        ); // catì€ ì¸ìëª…
      }
      
      // const maincard = (
      //   <div className="main-card">
      //     <img
      //       src="https://cataas.com/cat/HSENVDU4ZMqy7KQ0/says/react"
      //       alt="ê³ ì–‘ì´"
      //       width="400"
      //     />
      //     <button>ğŸ¤</button>
      //   </div>
      // )

      // ìœ„ì˜ë³€ìˆ˜í˜•ì„ í™”ì‚´í‘œ í•¨ìˆ˜ ë°©ì‹ì˜ ì»´í¼ë„ŒíŠ¸ë¡œ ë§Œë“¬
      // propsë¥¼ ì•ˆì“°ê³  objectí˜•ìœ¼ë¡œ ë°”ë¡œ ë°›ì„ ìˆ˜ ë„ ìˆìŒ
      const MianCard = ({ img, onHeartClick}) => {
        // í•˜íŠ¸ ëˆŒë €ì„ë•Œ ì½˜ì†”ì— 'í•˜íŠ¸ ëˆŒë €ìŒ'ì´ë¼ ì¶œë ¥ë˜ê²Œ í•¨ìˆ˜
        
        return (
          <div className="main-card">
            <img
              src={img}
              alt="ê³ ì–‘ì´"
              width="400"
            />
            <button onClick={onHeartClick}>ğŸ¤</button>
          </div>
        ) // buttonì— onClcikë˜ì—ˆì„ë•Œ handleHeartClickì„ í˜¸ì¶œ
      }

      // 1. ë‘ê°œë¥¼ ë¬¶ì„ë•Œì—ëŠ” ìµœìƒìœ„ íƒœê·¸ê°€ í•˜ë‚˜ì—¬ì•¼ë§Œí•¨, ì´ëŸ´ë•ŒëŠ” <div>ë¡œ ë¬¶ì–´ì¤Œ, ìµœì¢…ìœ¼ë¡œ ì»´í¼ë„ŒíŠ¸í˜•ì„ íƒœê·¸ ì•ˆì— ë„£ìŒ
      const App = () =>{
        const CAT1 = "https://cataas.com/cat/HSENVDU4ZMqy7KQ0/says/react";
        const CAT2 = "https://cataas.com/cat/BxqL2EjFmtxDkAm2/says/inflearn";
        const CAT3 = "https://cataas.com/cat/18MD6byVC1yKGpXp/says/JavaScript";

        const cats = [CAT1, CAT2, CAT3]
         // ì›í•˜ëŠ” ê°’ì´ ë³€í•˜ëŠ” ìƒíƒœ ë§Œë“¤ê¸° React.useState
        const [counter, setCounter] = React.useState(jsonLocalStorage.getItem('counter')) // ë°‘ì˜ ë‘ê°€ì§€ ì¶•ì•½í•˜ì—¬, (ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì˜ ì €ì¥ê°’ ìƒíƒœ)
        // const counter = counterState[0] // counterState ìì²´ì˜ ìˆ˜
        // const setCounter = counterState[1] // counterState ìƒíƒœë¥¼ ì¡°ì‘í•˜ëŠ” í•¨ìˆ˜

        // ì „ì†¡(ìƒì„±)ì„ ëˆ„ë¥´ë©´ ê³ ì–‘ì´ ì‚¬ì§„ì„ ë°”ê¾¸ëŠ” ìƒíƒœë§Œë“¤ê¸°
        const [mainCat, setMainCat] = React.useState(CAT3)
        // ê³ ì–‘ì´ ì¢‹ì•„ìš”(í•˜íŠ¸) ìƒíƒœ ë§Œë“¤ê¸°
        const [favorites, setFavorites] = React.useState(jsonLocalStorage.getItem('favorites') || []) // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— favoritesê°€ valueê°’ì´ ì—†ì„ë•Œ ë‚˜ëŠ” ì—ëŸ¬ í•´ê²°ë¡œ ||(ë˜ëŠ”) [](ë¹ˆë°°ì—´)ë¡œ ì´ˆê¸°í™” í•´ì¤Œ
        // ì „ì†¡ ì´ë°´íŠ¸
        function updateMainCat(){
          setMainCat(CAT2)
          const nextCounter = counter + 1
          setCounter(nextCounter)
          jsonLocalStorage.setItem('counter', nextCounter)
        }
        // í•˜íŠ¸í´ë¦­ ì´ë²¤íŠ¸
        // ë©”ì¸ì¹´ë“œì—ì„œ ê°€ì ¸ì˜¨ê²ƒì„
        function handleHeartClick(){
          const nextFavorites = [...favorites, mainCat]
          setFavorites(nextFavorites)
          jsonLocalStorage.setItem('favorites', nextFavorites)
        }
        return( // counter ìì²´ì˜ ìˆ˜ê°€ ë¸Œë¼ìš°ì €ì—ì„œ ë³€í•˜ëŠ”ê²ƒì„
          <div>
            <H1>{counter}ë²ˆì§¸ ê³ ì–‘ì´ ê°€ë¼ì‚¬ëŒ€</H1>
            <Form updateMainCat= {updateMainCat}/>
            <MianCard img={mainCat} onHeartClick={handleHeartClick}/>
            <Favorites favorites={favorites}/>
          </div>
        )// H1ì˜ ì»´í¼ë„ŒíŠ¸ ì¬ì‚¬ìš©ì„ ìœ„í•´ ~ì»´í¼ë„ŒíŠ¸ëª…ì„ íƒœê·¸ì•ˆì—ë„£ê³  ë‚´ìš©ì„ ì¨ì£¼ë©´ ë‚´ìš©ì´ childrenì´ë€ object nameìœ¼ë¡œ ë“¤ì–´ì˜´, ê·¸ë˜ì„œ ì»´í¼ë„ŒíŠ¸ ê°€ì„œ ë‚´ìš©ì„  props.childrenì´ë¼ ì¨ì£¼ë©´ë¨
        // handelFormSumit,handleHeartClickì€ ì»´í¼ë„ŒíŠ¸ì—ê°€ì„œ propsìœ¼ë¡œ ë„˜ê²¨ì£¼ì•¼ í•˜ê¸°ë•Œë¬¸ì—
      }
      const ì—¬ê¸°ë‹¤ê°€ê·¸ë ¤ = document.querySelector('#app')

      ReactDOM.render(<App />, ì—¬ê¸°ë‹¤ê°€ê·¸ë ¤) // 2. appì´ë€ ë¦¬ì•¡íŠ¸í˜• ë³€ìˆ˜ë¥¼ 'ì—¬ê¸°ë‹¤ê°€ê·¸ë ¤' ìš”ì†Œì— ê·¸ë ¤ë¼

    
        
    </script>

  </body>
</html>
